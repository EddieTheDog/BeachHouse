<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Beach House Admin v1.2</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<style>
  body { font-family: system-ui, sans-serif; background: #fff8e1; padding: 20px; min-height: 100vh; }
  h1 { margin-bottom: 20px; text-align: center; }
  .request { border: 1px solid #ccc; border-radius: 5px; padding: 12px; margin-bottom: 10px; background: #fff; box-shadow: 1px 1px 5px rgba(0,0,0,0.1); }
  .request p { margin: 3px 0; }
  footer { margin-top: 20px; font-size: 0.8rem; color: #555; text-align: center; }
</style>
</head>
<body>

<h1>All Work Requests v1.2</h1>
<div id="requests">Loading...</div>
<footer>Version 1.2</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const supabaseUrl = 'https://ofnlpqfscyecatetnuqi.supabase.co';
  const supabaseKey = 'sb_publishable_jjdmHkgGrbjqYwY14kS9ng_Ivuq-Pjc';
  const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

  const requestsEl = document.getElementById('requests');

  async function loadRequests() {
    const { data } = await supabaseClient.from('work_requests').select('*').order('id', { ascending: false });
    if (!data || data.length === 0) {
      requestsEl.innerText = 'No requests yet';
      return;
    }

    requestsEl.innerHTML = data.map(r => `
      <div class="request">
        <p><strong>${r.name}</strong> (${r.room})</p>
        <p>${r.request}</p>
        <p>Status: ${r.status} | Submitted: ${new Date(r.date).toLocaleString()}</p>
      </div>
    `).join('');
  }

  loadRequests();
});
</script>

</body>
</html>
