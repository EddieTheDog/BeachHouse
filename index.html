<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Beach House Guest</title>
<style>
  body { font-family: sans-serif; text-align:center; background:#f0f8ff; margin:0; padding:0; }
  #message { font-size: 2rem; margin: 50px; }
</style>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
<div id="message">Loading...</div>

<script>
document.addEventListener('DOMContentLoaded', async function() {
  try {
    // Initialize Supabase first
    const SUPABASE_URL = 'https://ofnlpqfscyecatetnuqi.supabase.co';
    const SUPABASE_KEY = 'sb_publishable_jjdmHkgGrbjqYwY14kS9ng_Ivuq-Pjc';
    const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    // Check if any guests exist
    const { data, error } = await supabaseClient.from('families').select('*');
    if(error) throw error;

    const messageDiv = document.getElementById('message');

    if(!data || data.length === 0){
      messageDiv.innerText = "No guests currently staying.";
      return;
    }

    // Future: expand dashboard here
    messageDiv.innerText = "Guests are currently staying. Dashboard coming soon!";
  } catch(e) {
    document.getElementById('message').innerText = "Error loading guest data.";
    console.error(e);
  }
});
</script>
</body>
</html>
